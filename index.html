<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PC Builder</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap');
        body { font-family: 'Inter', sans-serif; }
        .step-card {
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .step-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1);
        }
        .selected {
            background-color: #3b82f6 !important;
            color: white !important;
            border-color: #3b82f6 !important;
        }
        .progress-bar {
            transition: width 0.4s ease;
        }
    </style>
</head>
<body class="bg-[#0f172a] text-white min-h-screen">
    <div class="max-w-xl mx-auto p-4">
        <!-- Header -->
        <div class="flex items-center justify-between mb-6">
            <div class="flex items-center gap-3">
                <i class="fa-solid fa-microchip text-3xl text-blue-500"></i>
                <div>
                    <h1 class="text-2xl font-semibold">–°–±–æ—Ä–∫–∞ –ü–ö</h1>
                    <p class="text-gray-400 text-sm">–®–∞–≥ <span id="current-step">1</span>/10</p>
                </div>
            </div>
            <button onclick="tg.close()" class="text-gray-400 hover:text-white">
                <i class="fa-solid fa-xmark text-2xl"></i>
            </button>
        </div>

        <!-- Progress Bar -->
        <div class="h-1 bg-gray-700 rounded-full mb-8 overflow-hidden">
            <div id="progress" class="h-1 bg-blue-500 rounded-full progress-bar w-1/10"></div>
        </div>

        <!-- Steps Container -->
        <div id="steps" class="space-y-6"></div>

        <!-- Summary -->
        <div id="summary" class="hidden mt-8 bg-gray-900 rounded-2xl p-6 border border-gray-700">
            <h2 class="text-xl font-semibold mb-4 flex items-center gap-2">
                <i class="fa-solid fa-check-circle text-green-500"></i>
                –í–∞—à–∞ —Å–±–æ—Ä–∫–∞
            </h2>
            <div id="summary-content" class="space-y-3 text-sm"></div>
            <div class="mt-6 pt-6 border-t border-gray-700">
                <div class="flex justify-between items-center text-lg">
                    <span class="text-gray-400">–ò—Ç–æ–≥–æ:</span>
                    <span id="total-price" class="font-semibold text-2xl text-blue-400"></span>
                </div>
            </div>
        </div>
    </div>

    <script>
        const tg = window.Telegram.WebApp;
        tg.ready();
        tg.expand();

        // –ê–¥–∞–ø—Ç–∞—Ü–∏—è –ø–æ–¥ —Ç–µ–º—É Telegram
        function applyTheme() {
            const theme = tg.themeParams;
            document.documentElement.style.setProperty('--tg-theme-bg-color', theme.bg_color || '#0f172a');
            document.documentElement.style.setProperty('--tg-theme-text-color', theme.text_color || '#ffffff');
        }
        applyTheme();

        const PRICES = { /* –í—Å—Ç–∞–≤—å—Ç–µ –≤–µ—Å—å –≤–∞—à —Å–ª–æ–≤–∞—Ä—å PRICES —Å—é–¥–∞ */ };

        const answers = {};
        let currentStepIndex = 0;

        const steps = [
            { id: 'cpu', title: '–ü—Ä–æ—Ü–µ—Å—Å–æ—Ä', icon: 'üß†', question: 'AMD –∏–ª–∏ Intel?', options: ['AMD', 'Intel'] },
            { id: 'cpu_series', title: '–°–µ—Ä–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞', icon: 'üìà', question: '–í—ã–±–µ—Ä–∏—Ç–µ —Å–µ—Ä–∏—é', options: [] },
            { id: 'cpu_model', title: '–ú–æ–¥–µ–ª—å –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞', icon: 'üîß', question: '–í—ã–±–µ—Ä–∏—Ç–µ –º–æ–¥–µ–ª—å', options: [] },
            { id: 'gpu_brand', title: '–í–∏–¥–µ–æ–∫–∞—Ä—Ç–∞', icon: 'üéÆ', question: '–ë—Ä–µ–Ω–¥ –≤–∏–¥–µ–æ–∫–∞—Ä—Ç—ã?', options: ['Nvidia', 'Radeon', 'Intel'] },
            { id: 'gpu_generation', title: '–ü–æ–∫–æ–ª–µ–Ω–∏–µ', icon: 'üìÖ', question: '–ü–æ–∫–æ–ª–µ–Ω–∏–µ?', options: [] },
            { id: 'gpu_model', title: '–ú–æ–¥–µ–ª—å –≤–∏–¥–µ–æ–∫–∞—Ä—Ç—ã', icon: 'üíª', question: '–í—ã–±–µ—Ä–∏—Ç–µ –º–æ–¥–µ–ª—å', options: [] },
            { id: 'ram_size', title: '–û–ø–µ—Ä–∞—Ç–∏–≤–Ω–∞—è –ø–∞–º—è—Ç—å', icon: 'üß†', question: '–û–±—ä—ë–º –û–ó–£?', options: ['16 –ì–ë', '32 –ì–ë', '64 –ì–ë', '128 –ì–ë'] },
            { id: 'ssd_size', title: 'SSD', icon: 'üíæ', question: '–û–±—ä—ë–º SSD?', options: ['1 –¢–ë', '2 –¢–ë', '3 –¢–ë', '4 –¢–ë', '5 –¢–ë', '6 –¢–ë'] },
            { id: 'budget', title: '–ë—é–¥–∂–µ—Ç', icon: 'üí∞', question: '–í–∞—à –±—é–¥–∂–µ—Ç?', options: [] }
        ];

        function renderStep() {
            const step = steps[currentStepIndex];
            const container = document.getElementById('steps');
            container.innerHTML = '';

            const stepHTML = `
                <div class="step-card bg-gray-900 rounded-3xl p-6 border border-gray-700">
                    <div class="flex items-center gap-4 mb-6">
                        <div class="w-12 h-12 bg-blue-500/10 text-blue-500 rounded-2xl flex items-center justify-center text-3xl">
                            ${step.icon}
                        </div>
                        <div>
                            <div class="text-xs text-blue-400 font-medium">–®–ê–ì ${currentStepIndex + 1}/9</div>
                            <div class="text-2xl font-semibold">${step.title}</div>
                        </div>
                    </div>
                    <div class="text-lg font-medium mb-4">${step.question}</div>
                    <div id="options" class="grid grid-cols-2 gap-3"></div>
                </div>
            `;
            container.innerHTML = stepHTML;

            const optionsDiv = document.getElementById('options');
            step.options.forEach(opt => {
                const btn = document.createElement('button');
                btn.className = `w-full py-4 px-6 text-left rounded-2xl border border-gray-700 hover:border-blue-500 transition-all font-medium ${answers[step.id] === opt ? 'selected' : ''}`;
                btn.textContent = opt;
                btn.onclick = () => selectOption(step.id, opt);
                optionsDiv.appendChild(btn);
            });
        }

        function selectOption(stepId, value) {
            answers[stepId] = value;
            renderStep(); // –ø–µ—Ä–µ—Ä–∏—Å–æ–≤–∫–∞ —Ç–µ–∫—É—â–µ–≥–æ —à–∞–≥–∞ (—á—Ç–æ–±—ã –≤—ã–¥–µ–ª–∏—Ç—å –≤—ã–±—Ä–∞–Ω–Ω–æ–µ)

            if (currentStepIndex < steps.length - 1) {
                currentStepIndex++;
                updateProgress();
                renderStep();
            } else {
                showSummary();
            }
        }

        function updateProgress() {
            const progress = ((currentStepIndex + 1) / steps.length) * 100;
            document.getElementById('progress').style.width = `${progress}%`;
            document.getElementById('current-step').textContent = currentStepIndex + 1;
        }

        function showSummary() {
            const total = Object.keys(answers).reduce((sum, key) => {
                return sum + (PRICES[answers[key]] || 0);
            }, 0);

            const summaryHTML = Object.keys(answers).map(key => {
                const value = answers[key];
                const price = PRICES[value] || 0;
                return `<div class="flex justify-between py-2 border-b border-gray-800 last:border-0">
                    <span class="text-gray-400">${key}</span>
                    <span>${value} <span class="text-blue-400">‚Äî ${price} ‚ÇΩ</span></span>
                </div>`;
            }).join('');

            document.getElementById('summary-content').innerHTML = summaryHTML;
            document.getElementById('total-price').textContent = `${total.toLocaleString('ru-RU')} ‚ÇΩ`;
            document.getElementById('summary').classList.remove('hidden');

            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –≥–ª–∞–≤–Ω—É—é –∫–Ω–æ–ø–∫—É Telegram
            tg.MainButton.setText('–û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–±–æ—Ä–∫—É –≤ –±–æ—Ç');
            tg.MainButton.show();
            tg.MainButton.onClick(() => {
                tg.sendData(JSON.stringify(answers));
                tg.close();
            });
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        renderStep();
        updateProgress();
    </script>
</body>
</html>